<!DOCTYPE html>
<html>
<head>
  <title>My CRM App</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f4f4f4;
    }

    .card {
      background: white;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>

<body>

<h1>My CRM List</h1>

<div id="list"></div>

<script>
async function loadData(retries = 5) {
  try {
    const res = await fetch("https://crm-data.onrender.com/data");

    if (!res.ok) throw new Error("Server waking up");

    const data = await res.json();
    const container = document.getElementById("list");
    container.innerHTML = "";

    data.forEach(place => {
      const div = document.createElement("div");
      div.innerHTML = `
        <h3>${place.name}</h3>
        <p>${place.address}</p>
        <hr>
      `;
      container.appendChild(div);
    });

  } catch (err) {
    if (retries > 0) {
      document.getElementById("list").innerHTML =
        "Waking server... retrying...";
      setTimeout(() => loadData(retries - 1), 4000);
    } else {
      document.getElementById("list").innerHTML =
        "Server still starting. Refresh in a moment.";
    }
  }
}

loadData();
</script>

</body>
</html>
